<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>가계부 캐릭터 앱</title>
  <!-- 외부 CSS 파일 연결 -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="page">
    <!-- 헤더 -->
    <header class="app-header">
      <button class="icon-btn" aria-label="알림">
        <img src="image/alarm.png" alt="알림 아이콘" />
      </button>
      <button class="icon-btn" aria-label="마이페이지">
        <img src="image/my.png" alt="마이페이지 아이콘" />
      </button>
      <button class="icon-btn" aria-label="메뉴">
        <img src="image/more.png" alt="메뉴 아이콘" />
      </button>
    </header>

    <!-- 오늘의 지출 -->
    <section class="today-section">
      <div class="today-card">
        <div class="today-label-row">
          <span class="today-label">오늘의 지출</span>
          <button class="refresh-btn" id="refresh-btn" aria-label="새로고침">
            <img src="image/f5.png" alt="새로고침 아이콘" class="refresh-icon" />
          </button>
        </div>
        <div class="today-amount-text" id="today-amount">
          0원
        </div>
      </div>
    </section>

    <!-- 캐릭터 레벨 & 프로그레스 링 -->
    <section class="mascot-section">
      <div class="progress-ring">
        <div class="progress-inner">
          <img src="image/seed.png" alt="저금 캐릭터" class="mascot-img" />
          <div class="level-text">Lv. 1</div>
        </div>
      </div>
    </section>

    <!-- 가계부 / 후회도 / 소비 평가 -->
    <section class="actions-card">
      <div class="actions-row">
        <button class="action-item">
          <img src="image/calendar.png" alt="가계부 아이콘" />
          <span class="action-label">가계부</span>
        </button>

        <button class="action-item">
          <img src="image/sad.png" alt="후회도 아이콘" />
          <span class="action-label">후회도</span>
        </button>

        <button class="action-item">
          <img src="image/good.png" alt="소비 평가 아이콘" />
          <span class="action-label">소비 평가</span>
        </button>
      </div>
    </section>

    <!-- 지출 내역 -->
    <section class="history-card">
      <div class="history-header">지출 내역</div>
      <div class="history-list" id="history-list"></div>
      <div class="history-more">더 보기</div>
    </section>
  </div>

  <script>
    // 지출 내역 더미 데이터 (태그 추가)
    const expenses = [
      {
        icon: "M",
        title: "메가커피",
        subtitle: "메가커피 · 카카오뱅크",
        tag: "카페",
        amount: 3900
      },
      {
        icon: "N",
        title: "넷플릭스",
        subtitle: "넷플릭스 · 카카오페이",
        tag: "구독",
        amount: 11700
      },
      {
        icon: "B",
        title: "배달의 민족",
        subtitle: "페페로니 피자 P 세트",
        tag: "배달",
        amount: 14000
      }
    ];

    const historyListEl = document.getElementById("history-list");
    const todayAmountEl = document.getElementById("today-amount");

    const formatCurrency = (n) =>
      n.toLocaleString("ko-KR", { maximumFractionDigits: 0 }) + "원";

    // 렌더링 + 합계 계산
    let total = 0;
    expenses.forEach((item) => {
      total += item.amount;

      const row = document.createElement("div");
      row.className = "history-item";

      row.innerHTML = `
        <div class="history-left">
          <div class="history-icon">${item.icon}</div>
          <div class="history-text">
            <div class="history-title-row">
              <span class="history-merchant">${item.title}</span>
              <span class="history-tag">${item.tag}</span>
            </div>
            <div class="history-sub">${item.subtitle}</div>
          </div>
        </div>
        <div class="history-right">
          <span class="history-amount">-${formatCurrency(item.amount)}</span>
        </div>
      `;

      historyListEl.appendChild(row);
    });

    // 오늘의 지출 = 합계
    todayAmountEl.textContent = formatCurrency(total);

    // 새로고침 버튼
    document.getElementById("refresh-btn")
      .addEventListener("click", () => location.reload());
  </script>
</body>
</html>
