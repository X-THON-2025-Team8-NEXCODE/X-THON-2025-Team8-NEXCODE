<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Buy-bye AI ì†Œë¹„ ë¶„ì„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- í°íŠ¸: í”„ë¦¬í…ë‹¤ë“œ -->
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

  <style>
    /* === ê¸°ë³¸ ì„¤ì • (ê¸°ì¡´ ì•± ìŠ¤íƒ€ì¼ ìœ ì§€) === */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: "Pretendard", -apple-system, sans-serif;
      /* ë°°ê²½ ì´ë¯¸ì§€ ê²½ë¡œ í™•ì¸í•´ì£¼ì„¸ìš” */
      background-image: url("./image/background.png"); 
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .app-frame {
      width: 100vw;
      max-width: 480px;
      height: 100%;
      position: relative;
      display: flex;
      flex-direction: column;
      padding: 20px;
      overflow-y: auto;
    }
    .app-frame::-webkit-scrollbar { display: none; }

    /* === ìƒë‹¨ í—¤ë” === */
    .header-area { margin-top: 10px; margin-bottom: 10px; }
    .home-btn {
      display: flex; flex-direction: column; align-items: center;
      background: none; border: none; cursor: pointer; width: 50px;
    }
    .home-btn img { width: 40px; }
    .home-text { font-size: 11px; color: #666; margin-top: 2px; font-weight: 600; }

    /* === ìºë¦­í„° ì˜ì—­ === */
    .character-area {
      text-align: center;
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }
    .char-img {
      width: 120px; height: 120px;
      object-fit: cover;
      filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1));
    }
    .page-title {
      font-size: 1.4rem; font-weight: 800; color: #000;
      margin-top: 10px;
    }

    /* === ê³µí†µ ì¹´ë“œ ìŠ¤íƒ€ì¼ === */
    .card-box {
      background: #ffffff;
      border-radius: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      padding: 30px 25px;
      width: 100%;
      flex: 1; /* ë‚¨ì€ ê³µê°„ ì±„ìš°ê¸° */
      display: flex;
      flex-direction: column;
      transition: all 0.3s ease;
      margin-bottom: 20px;
    }

    /* === A. ì…ë ¥ í™”ë©´ (Form) === */
    .input-group { margin-bottom: 20px; }
    .input-label {
      font-size: 0.95rem; font-weight: 700; color: #555;
      margin-bottom: 8px; display: block;
    }
    
    /* ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ (ë‘¥ê¸€ê³  ê¹”ë”í•˜ê²Œ) */
    .custom-input, .custom-select {
      width: 100%;
      padding: 15px;
      border-radius: 15px;
      border: 2px solid transparent;
      background: #F5F6F8;
      font-size: 1rem; font-weight: 600; color: #333;
      font-family: "Pretendard";
      transition: all 0.2s;
      outline: none;
    }
    .custom-input:focus, .custom-select:focus {
      background: #fff;
      border-color: #5de39e; /* í¬ì»¤ìŠ¤ì‹œ ë¸Œëœë“œ ì»¬ëŸ¬ */
      box-shadow: 0 0 0 4px rgba(93, 227, 158, 0.1);
    }

    /* ë¶„ì„ ë²„íŠ¼ */
    .analyze-btn {
      margin-top: auto; /* í•˜ë‹¨ ë°°ì¹˜ */
      width: 100%;
      padding: 18px;
      border-radius: 20px;
      border: none;
      background: linear-gradient(90deg, #5de39e 0%, #4bc98a 100%);
      color: white;
      font-size: 1.1rem; font-weight: 800;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(93, 227, 158, 0.3);
      transition: transform 0.1s;
    }
    .analyze-btn:active { transform: scale(0.98); }

    /* === B. ë¡œë”© í™”ë©´ (ìˆ¨ê¹€ ìƒíƒœ) === */
    .loading-screen {
      display: none; /* í‰ì†Œì—” ìˆ¨ê¹€ */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
    }
    /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ (ë¹™ê¸€ë¹™ê¸€ ì”¨ì•—) */
    .spinner-img {
      width: 80px; height: 80px;
      animation: spin 2s infinite linear;
      margin-bottom: 20px;
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }
    
    .loading-text {
      font-size: 1.1rem; font-weight: 700; color: #555;
      animation: pulse 1.5s infinite ease-in-out;
    }
    @keyframes pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }

    /* === C. ê²°ê³¼ í™”ë©´ (ìˆ¨ê¹€ ìƒíƒœ) === */
    .result-screen { display: none; flex-direction: column; height: 100%; }

    /* íŒì • ê²°ê³¼ ë°°ì§€ (ì‹ í˜¸ë“±) */
    .verdict-badge {
      align-self: center;
      padding: 10px 25px;
      border-radius: 30px;
      font-size: 1.2rem; font-weight: 800;
      color: white;
      margin-bottom: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      display: flex; align-items: center; gap: 8px;
    }
    .verdict-icon { font-size: 1.4rem; }

    /* ìƒíƒœë³„ ìƒ‰ìƒ í´ë˜ìŠ¤ */
    .bg-green { background: #2ecc71; } /* ì¶”ì²œ */
    .bg-yellow { background: #f1c40f; } /* ì£¼ì˜ */
    .bg-red { background: #e74c3c; }    /* ë¹„ì¶”ì²œ */

    /* ìœ„í—˜ ì ìˆ˜ ê²Œì´ì§€ */
    .risk-area { margin-bottom: 30px; }
    .risk-label-row {
      display: flex; justify-content: space-between;
      font-weight: 700; color: #666; margin-bottom: 8px;
    }
    .risk-score { font-size: 1.2rem; font-weight: 900; color: #333; }
    
    .risk-bar-bg {
      width: 100%; height: 20px;
      background: #eee; border-radius: 10px; overflow: hidden;
    }
    .risk-bar-fill {
      height: 100%; border-radius: 10px;
      /* ìœ„í—˜ë„ì— ë”°ë¼ ë„ˆë¹„/ìƒ‰ìƒ JSë¡œ ë³€ê²½ */
      width: 0%; 
      transition: width 1s ease-out, background 0.3s;
    }

    /* AI ì¡°ì–¸ ë§í’ì„  */
    .advice-bubble {
      background: #f0fdf4;
      border: 2px solid #5de39e;
      border-radius: 20px;
      border-top-left-radius: 0; /* ë§ê¼¬ë¦¬ íš¨ê³¼ */
      padding: 20px;
      font-size: 1rem; font-weight: 600; color: #333;
      line-height: 1.5;
      position: relative;
      margin-left: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    /* ë§í’ì„  ê¼¬ë¦¬ */
    .advice-bubble::before {
      content: ""; position: absolute;
      top: 0; left: -12px;
      width: 0; height: 0;
      border-top: 15px solid #5de39e;
      border-left: 15px solid transparent;
    }
    .advice-bubble::after {
      content: ""; position: absolute;
      top: 2px; left: -8px;
      width: 0; height: 0;
      border-top: 12px solid #f0fdf4;
      border-left: 12px solid transparent;
    }

    .retry-btn {
      margin-top: auto;
      width: 100%; padding: 15px;
      border-radius: 15px; border: none;
      background: #eee; color: #555;
      font-weight: 700; cursor: pointer;
    }

  </style>
</head>
<body>

  <div class="app-frame">
    
    <!-- 1. í—¤ë” -->
    <div class="header-area">
      <button class="home-btn" onclick="location.href='index.html'">
        <!-- í™ˆ ì•„ì´ì½˜ -->
        <img src="./image/home.png" alt="í™ˆ">
        <span class="home-text">í™ˆ í™”ë©´</span>
      </button>
    </div>

    <!-- 2. ìºë¦­í„° ì˜ì—­ (ìƒí™©ì— ë”°ë¼ ì´ë¯¸ì§€ ë°”ë€œ) -->
    <div class="character-area">
      <!-- ê¸°ë³¸ ìºë¦­í„° (seed.png) ë˜ëŠ” Lv4smile ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ë„£ìœ¼ì„¸ìš” -->
      <img src="./image/seed.png" class="char-img" id="mainCharImg" alt="ìºë¦­í„°">
      <div class="page-title" id="pageTitle">AIê°€ ì¬í˜¸ë‹˜ì˜ ì†Œë¹„ ê³ ë¯¼ì„ ë“¤ì–´ì¤„ê²Œìš”!</div>
    </div>

    <div class="card-box">
      
      <!-- A. ì…ë ¥ í™”ë©´ (ê¸°ë³¸) -->
      <div id="inputScreen">
        <div class="input-group">
          <label class="input-label">ì–´ë–¤ ë¬¼ê±´ì¸ê°€ìš”?</label>
          <input type="text" class="custom-input" id="itemName" placeholder="ì˜ˆ: í…€ë¸”ëŸ¬, ìš´ë™í™”">
        </div>

        <div class="input-group">
          <label class="input-label">ê°€ê²©ì€ ì–¼ë§ˆì¸ê°€ìš”?</label>
          <input type="number" class="custom-input" id="itemPrice" placeholder="ìˆ«ìë§Œ ì…ë ¥ (ì›)">
        </div>

        <div class="input-group">
          <label class="input-label">ì¹´í…Œê³ ë¦¬</label>
          <select class="custom-select" id="itemCategory">
            <option value="ì‹ë¹„">ì‹ë¹„ (ì¹´í˜/ë°°ë‹¬)</option>
            <option value="ì‡¼í•‘">ì‡¼í•‘ (ì˜·/ì¡í™”)</option>
            <option value="ì·¨ë¯¸">ì·¨ë¯¸/ì—¬ê°€</option>
            <option value="êµ¬ë…">ì •ê¸° êµ¬ë…</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
          </select>
        </div>

        <div class="input-group">
          <label class="input-label">í˜„ì¬ ì‹œê°„</label>
          <!-- JSë¡œ ìë™ ì…ë ¥ë˜ì§€ë§Œ ìˆ˜ì • ê°€ëŠ¥í•˜ê²Œ -->
          <input type="text" class="custom-input" id="currentTime" readonly>
        </div>

        <button class="analyze-btn" onclick="startAnalysis()">
          âœ¨ AIì—ê²Œ ë¬¼ì–´ë³´ê¸°
        </button>
      </div>


      <!-- B. ë¡œë”© í™”ë©´ (ë¶„ì„ ì¤‘) -->
      <div id="loadingScreen" class="loading-screen">
        <!-- ë¡œë”© ë•Œ ëŒì•„ê°€ëŠ” ì´ë¯¸ì§€ -->
        <img src="./image/seed.png" class="spinner-img">
        <div class="loading-text">
          AIê°€ ì†Œë¹„ íŒ¨í„´ì„<br>ì—´ì‹¬íˆ ë¶„ì„í•˜ê³  ìˆì–´ìš”...
        </div>
      </div>


      <!-- C. ê²°ê³¼ í™”ë©´ (ë¶„ì„ ì™„ë£Œ) -->
      <div id="resultScreen" class="result-screen">
        <!-- íŒì • ë°°ì§€ (ğŸ”´ğŸŸ¡ğŸŸ¢) -->
        <div class="verdict-badge bg-green" id="verdictBadge">
          <span class="verdict-icon">ğŸŸ¢</span>
          <span id="verdictText">êµ¬ë§¤ ì¶”ì²œ</span>
        </div>

        <!-- ìœ„í—˜ ì ìˆ˜ ê²Œì´ì§€ -->
        <div class="risk-area">
          <div class="risk-label-row">
            <span>ê³¼ì†Œë¹„ ìœ„í—˜ë„</span>
            <span class="risk-score" id="riskScoreText">15ì </span>
          </div>
          <div class="risk-bar-bg">
            <div class="risk-bar-fill" id="riskBar" style="width: 15%; background: #2ecc71;"></div>
          </div>
        </div>

        <!-- AI ì¡°ì–¸ ë§í’ì„  -->
        <div style="display: flex; align-items: flex-start;">
          <div class="advice-bubble" id="aiMessage">
            "ì§€ë‚œë‹¬ ì‹ë¹„ ì§€ì¶œì´ ì ì–´ì„œ ì´ì •ë„ëŠ” ê´œì°®ì•„ìš”! <br>ëŒ€ì‹  ì´ë²ˆ ì£¼ ì»¤í”¼ëŠ” ì´ê±¸ë¡œ ëë‚´ê¸°ë¡œ ì•½ì†í•´ìš”~"
          </div>
        </div>

        <button class="retry-btn" onclick="resetPage()">ë‹¤ë¥¸ ë¬¼ê±´ë„ ë¬¼ì–´ë³´ê¸°</button>
      </div>

    </div>
  </div>

  <script>
    // === 1. ì´ˆê¸° ì„¤ì •: í˜„ì¬ ì‹œê°„ ìë™ ì…ë ¥ ===
    const timeInput = document.getElementById('currentTime');
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    timeInput.value = `${now.getFullYear()}-${now.getMonth()+1}-${now.getDate()} ${hours}:${minutes}`;

    // === 2. ë¶„ì„ ì‹œì‘ í•¨ìˆ˜ ===
    function startAnalysis() {
      const name = document.getElementById('itemName').value;
      const price = document.getElementById('itemPrice').value;

      // ìœ íš¨ì„± ê²€ì‚¬
      if (!name || !price) {
        alert("ë¬¼ê±´ ì´ë¦„ê³¼ ê°€ê²©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        return;
      }

      // í™”ë©´ ì „í™˜: ì…ë ¥ì°½ ìˆ¨ê¸°ê¸° -> ë¡œë”©ì°½ ë³´ì´ê¸°
      document.getElementById('inputScreen').style.display = 'none';
      document.getElementById('loadingScreen').style.display = 'flex';
      
      // íƒ€ì´í‹€ ë³€ê²½
      document.getElementById('pageTitle').innerText = "ë¶„ì„ ì¤‘...";

      // --- [ë°±ì—”ë“œ ì—°ë™ ì‹œ ì´ ë¶€ë¶„ì„ API í˜¸ì¶œë¡œ ë°”ê¾¸ì„¸ìš”] ---
      // ì§€ê¸ˆì€ 2ì´ˆ ë’¤ì— ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì²˜ëŸ¼ 'ê°€ì§œ(Mock)'ë¡œ ë§Œë“­ë‹ˆë‹¤.
      setTimeout(() => {
        showResult(price); // ê°€ê²©ì„ ë„˜ê²¨ì„œ í…ŒìŠ¤íŠ¸ìš© ê²°ê³¼ ìƒì„±
      }, 2500); // 2.5ì´ˆ ë”œë ˆì´
    }

    // === 3. ê²°ê³¼ ë³´ì—¬ì£¼ê¸° í•¨ìˆ˜ ===
    function showResult(price) {
      // ë¡œë”© ìˆ¨ê¸°ê¸° -> ê²°ê³¼ ë³´ì´ê¸°
      document.getElementById('loadingScreen').style.display = 'none';
      document.getElementById('resultScreen').style.display = 'flex';
      
      // ìºë¦­í„° ì´ë¯¸ì§€ ë³€ê²½ (Lv4 Smile ì´ë¯¸ì§€ ê²½ë¡œê°€ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ êµì²´)
      // document.getElementById('mainCharImg').src = "./index/image/Lv4smile.png";
      document.getElementById('pageTitle').innerText = "ë¶„ì„ ì™„ë£Œ!";

      // --- [AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜] ---
      // ì‹¤ì œë¡œëŠ” ë°±ì—”ë“œì—ì„œ ë°›ì€ json ë°ì´í„°ë¥¼ ì—¬ê¸°ì— ë„£ì–´ì•¼ í•©ë‹ˆë‹¤.
      
      const verdictBadge = document.getElementById('verdictBadge');
      const verdictText = document.getElementById('verdictText');
      const verdictIcon = document.querySelector('.verdict-icon');
      const riskBar = document.getElementById('riskBar');
      const riskText = document.getElementById('riskScoreText');
      const message = document.getElementById('aiMessage');

      // ì˜ˆì‹œ ë¡œì§: 3ë§Œì› ë„˜ìœ¼ë©´ 'ì£¼ì˜', 10ë§Œì› ë„˜ìœ¼ë©´ 'ë¹„ì¶”ì²œ'
      let score = 0;
      
      if (price > 100000) {
        // ğŸ”´ ë¹„ì¶”ì²œ
        verdictBadge.className = 'verdict-badge bg-red';
        verdictText.innerText = 'ê°•ë ¥ ë¹„ì¶”ì²œ';
        verdictIcon.innerText = 'ğŸ”´';
        score = 95;
        riskBar.style.background = '#e74c3c';
        message.innerHTML = "ì ê¹! âœ‹ ì´ë²ˆ ë‹¬ ì˜ˆì‚°ì´ ê±°ì˜ ë°”ë‹¥ë‚¬ì–´ìš”.<br>ì§€ê¸ˆ ì´ ì†Œë¹„ëŠ” ìœ„í—˜í•´ìš”. í•˜ë£¨ë§Œ ë” ê³ ë¯¼í•´ë³´ëŠ” ê±´ ì–´ë•Œìš”?";
      
      } else if (price > 30000) {
        // ğŸŸ¡ ì£¼ì˜
        verdictBadge.className = 'verdict-badge bg-yellow';
        verdictText.innerText = 'ì ê¹ ê³ ë¯¼!';
        verdictIcon.innerText = 'ğŸŸ¡';
        score = 60;
        riskBar.style.background = '#f1c40f';
        message.innerHTML = "ë‚˜ì˜ì§„ ì•Šì§€ë§Œ, ìµœê·¼ ë¹„ìŠ·í•œ ì¹´í…Œê³ ë¦¬ ì§€ì¶œì´ ëŠ˜ê³  ìˆì–´ìš”.<br>ê¼­ í•„ìš”í•œì§€ 3ë²ˆë§Œ ë” ìƒê°í•´ë³¼ê¹Œìš”?";
      
      } else {
        // ğŸŸ¢ ì¶”ì²œ
        verdictBadge.className = 'verdict-badge bg-green';
        verdictText.innerText = 'êµ¬ë§¤ ì¶”ì²œ';
        verdictIcon.innerText = 'ğŸŸ¢';
        score = 15;
        riskBar.style.background = '#2ecc71';
        message.innerHTML = "í›Œë¥­í•œ ì†Œë¹„ì˜ˆìš”! âœ¨<br>ë‹¹ì‹ ì˜ ì ˆì œëœ ì†Œë¹„ ìŠµê´€ ë•ë¶„ì— ì´ì •ë„ëŠ” ì¶©ë¶„íˆ ì¦ê²¨ë„ ë©ë‹ˆë‹¤!";
      }

      // ê²Œì´ì§€ ë°” ì• ë‹ˆë©”ì´ì…˜
      setTimeout(() => {
        riskBar.style.width = score + "%";
        riskText.innerText = score + "ì ";
      }, 100);
    }

    // === 4. ë‹¤ì‹œ í•˜ê¸° ===
    function resetPage() {
      location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
    }

  </script>
  <script src="characterManager.js"></script>
</body>
</html>