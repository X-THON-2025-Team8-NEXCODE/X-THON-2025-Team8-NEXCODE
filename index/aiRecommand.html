<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Buy-bye AI ì†Œë¹„ ë¶„ì„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- í°íŠ¸: í”„ë¦¬í…ë‹¤ë“œ -->
  <link
    rel="stylesheet"
    as="style"
    crossorigin
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
  />

  <!-- ì´ í˜ì´ì§€ ì „ìš© CSS -->
  <link rel="stylesheet" href="aiRecommand.css" />
</head>
<body>

  <div class="app-frame">
    
    <!-- 1. í—¤ë” -->
    <div class="header-area">
      <button class="home-btn" onclick="location.href='index.html'">
        <img src="./image/home.png" alt="í™ˆ">
        <span class="home-text">í™ˆ í™”ë©´</span>
      </button>
    </div>

    <!-- 2. ìºë¦­í„° ì˜ì—­ (í…ìŠ¤íŠ¸ ì—†ì´ ì”¨ì•—ë§Œ) -->
    <div class="character-area">
      <img src="./image/seed.png" class="char-img" id="mainCharImg" alt="ìºë¦­í„°">
    </div>

    <!-- 3. ë§í’ì„  (swipeì™€ êµ¬ì¡° ë§ì¶¤ + ê¼¬ë¦¬ ìœ„ì—ì„œ seed ë°©í–¥) -->
    <div class="speech">
      <div class="speech-bubble">
        <p id="typing-text" class="typing-text"></p>
      </div>
    </div>

    <!-- 4. ì½˜í…ì¸  ì¹´ë“œ -->
    <div class="card-box">
      
      <!-- A. ì…ë ¥ í™”ë©´ -->
      <div id="inputScreen">
        <div class="input-group">
          <label class="input-label">ì–´ë–¤ ë¬¼ê±´ì¸ê°€ìš”?</label>
          <input type="text" class="custom-input" id="itemName" placeholder="ì˜ˆ: í…€ë¸”ëŸ¬, ìš´ë™í™”">
        </div>

        <div class="input-group">
          <label class="input-label">ê°€ê²©ì€ ì–¼ë§ˆì¸ê°€ìš”?</label>
          <input type="number" class="custom-input" id="itemPrice" placeholder="ìˆ«ìë§Œ ì…ë ¥ (ì›)">
        </div>

        <div class="input-group">
          <label class="input-label">ì¹´í…Œê³ ë¦¬</label>
          <select class="custom-select" id="itemCategory">
            <option value="ì‹ë¹„">ì‹ë¹„ (ì¹´í˜/ë°°ë‹¬)</option>
            <option value="ì‡¼í•‘">ì‡¼í•‘ (ì˜·/ì¡í™”)</option>
            <option value="ì·¨ë¯¸">ì·¨ë¯¸/ì—¬ê°€</option>
            <option value="êµ¬ë…">ì •ê¸° êµ¬ë…</option>
            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
          </select>
        </div>

        <div class="input-group">
          <label class="input-label">í˜„ì¬ ì‹œê°„</label>
          <input type="text" class="custom-input" id="currentTime" readonly>
        </div>

        <button class="analyze-btn" onclick="startAnalysis()">
          âœ¨ AIì—ê²Œ ë¬¼ì–´ë³´ê¸°
        </button>
      </div>

      <!-- B. ë¡œë”© í™”ë©´ -->
      <div id="loadingScreen" class="loading-screen">
        <img src="./image/seed.png" class="spinner-img" alt="ë¡œë”©">
        <div class="loading-text">
          AIê°€ ì†Œë¹„ íŒ¨í„´ì„<br>ì—´ì‹¬íˆ ë¶„ì„í•˜ê³  ìˆì–´ìš”...
        </div>
      </div>

      <!-- C. ê²°ê³¼ í™”ë©´ -->
      <div id="resultScreen" class="result-screen">
        <div class="verdict-badge bg-green" id="verdictBadge">
          <span class="verdict-icon">ğŸŸ¢</span>
          <span id="verdictText">êµ¬ë§¤ ì¶”ì²œ</span>
        </div>

        <div class="risk-area">
          <div class="risk-label-row">
            <span>ê³¼ì†Œë¹„ ìœ„í—˜ë„</span>
            <span class="risk-score" id="riskScoreText">15ì </span>
          </div>
          <div class="risk-bar-bg">
            <div class="risk-bar-fill" id="riskBar"></div>
          </div>
        </div>

        <div style="display: flex; align-items: flex-start;">
          <div class="advice-bubble" id="aiMessage">
            "ì§€ë‚œë‹¬ ì‹ë¹„ ì§€ì¶œì´ ì ì–´ì„œ ì´ì •ë„ëŠ” ê´œì°®ì•„ìš”! <br>ëŒ€ì‹  ì´ë²ˆ ì£¼ ì»¤í”¼ëŠ” ì´ê±¸ë¡œ ëë‚´ê¸°ë¡œ ì•½ì†í•´ìš”~"
          </div>
        </div>

        <button class="retry-btn" onclick="resetPage()">ë‹¤ë¥¸ ë¬¼ê±´ë„ ë¬¼ì–´ë³´ê¸°</button>
      </div>

    </div>
  </div>

  <script>
    // === 1. í˜„ì¬ ì‹œê°„ ìë™ ì…ë ¥ ===
    const timeInput = document.getElementById('currentTime');
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    timeInput.value = `${now.getFullYear()}-${now.getMonth()+1}-${now.getDate()} ${hours}:${minutes}`;

    // === 2. ë§í’ì„  íƒ€ì´í•‘ íš¨ê³¼ (swipeì™€ ë™ì¼ íŒ¨í„´) ===
    const typingTarget = document.getElementById("typing-text");
    const typingMessage = "AIê°€ ì¬í˜¸ë‹˜ì˜ ì†Œë¹„ ê³ ë¯¼ì„ ë“¤ì–´ì¤„ê²Œìš”.";
    let typingIndex = 0;

    function typeStep() {
      if (typingIndex <= typingMessage.length) {
        typingTarget.textContent = typingMessage.slice(0, typingIndex);
        typingIndex++;
        setTimeout(typeStep, 60); // ì†ë„
      }
    }

    // í˜ì´ì§€ ì§„ì… ì‹œ í•œ ë²ˆ ì‹¤í–‰
    typeStep();

    // === 3. ë¶„ì„ ì‹œì‘ ===
    function startAnalysis() {
      const name = document.getElementById('itemName').value;
      const price = document.getElementById('itemPrice').value;

      if (!name || !price) {
        alert("ë¬¼ê±´ ì´ë¦„ê³¼ ê°€ê²©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        return;
      }

      document.getElementById('inputScreen').style.display = 'none';
      document.getElementById('loadingScreen').style.display = 'flex';

      setTimeout(() => {
        showResult(price);
      }, 2500);
    }

    // === 4. ê²°ê³¼ ë³´ì—¬ì£¼ê¸° ===
    function showResult(price) {
      document.getElementById('loadingScreen').style.display = 'none';
      document.getElementById('resultScreen').style.display = 'flex';

      const verdictBadge = document.getElementById('verdictBadge');
      const verdictText  = document.getElementById('verdictText');
      const verdictIcon  = document.querySelector('.verdict-icon');
      const riskBar      = document.getElementById('riskBar');
      const riskText     = document.getElementById('riskScoreText');
      const message      = document.getElementById('aiMessage');

      let score = 0;
      const p = Number(price);

      if (p > 100000) {
        verdictBadge.className = 'verdict-badge bg-red';
        verdictText.innerText  = 'ê°•ë ¥ ë¹„ì¶”ì²œ';
        verdictIcon.innerText  = 'ğŸ”´';
        score = 95;
        riskBar.style.background = '#e74c3c';
        message.innerHTML = "ì ê¹! âœ‹ ì´ë²ˆ ë‹¬ ì˜ˆì‚°ì´ ê±°ì˜ ë°”ë‹¥ë‚¬ì–´ìš”.<br>ì§€ê¸ˆ ì´ ì†Œë¹„ëŠ” ìœ„í—˜í•´ìš”. í•˜ë£¨ë§Œ ë” ê³ ë¯¼í•´ë³´ëŠ” ê±´ ì–´ë•Œìš”?";
      
      } else if (p > 30000) {
        verdictBadge.className = 'verdict-badge bg-yellow';
        verdictText.innerText  = 'ì ê¹ ê³ ë¯¼!';
        verdictIcon.innerText  = 'ğŸŸ¡';
        score = 60;
        riskBar.style.background = '#f1c40f';
        message.innerHTML = "ë‚˜ì˜ì§„ ì•Šì§€ë§Œ, ìµœê·¼ ë¹„ìŠ·í•œ ì¹´í…Œê³ ë¦¬ ì§€ì¶œì´ ëŠ˜ê³  ìˆì–´ìš”.<br>ê¼­ í•„ìš”í•œì§€ 3ë²ˆë§Œ ë” ìƒê°í•´ë³¼ê¹Œìš”?";
      
      } else {
        verdictBadge.className = 'verdict-badge bg-green';
        verdictText.innerText  = 'êµ¬ë§¤ ì¶”ì²œ';
        verdictIcon.innerText  = 'ğŸŸ¢';
        score = 15;
        riskBar.style.background = '#2ecc71';
        message.innerHTML = "í›Œë¥­í•œ ì†Œë¹„ì˜ˆìš”! âœ¨<br>ë‹¹ì‹ ì˜ ì ˆì œëœ ì†Œë¹„ ìŠµê´€ ë•ë¶„ì— ì´ì •ë„ëŠ” ì¶©ë¶„íˆ ì¦ê²¨ë„ ë©ë‹ˆë‹¤!";
      }

      setTimeout(() => {
        riskBar.style.width = score + "%";
        riskText.innerText = score + "ì ";
      }, 100);
    }

    // === 5. ë‹¤ì‹œ í•˜ê¸° ===
    function resetPage() {
      location.reload();
    }
  </script>
</body>
</html>
